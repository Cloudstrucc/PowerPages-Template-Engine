{% comment %}
  Stylish Portfolio Theme - Header Template
  Based on Start Bootstrap Stylish Portfolio v6.0.6
  Adapted for Power Pages by CloudStrucc
{% endcomment %}

{% if user %}
{%- comment -%} AUTHENTICATED USER HEADER {%- endcomment -%}

<nav>
  <ul id="sp-skip-nav" style="margin: 0; padding: 0; list-style: none;">
    <li><a class="visually-hidden-focusable" href="#sp-main">Skip to main content</a></li>
  </ul>
</nav>

<header class="sp-app-bar">
  <div class="container">
    <div class="sp-app-bar-content">
      <div class="d-flex align-items-center">
        <a href="/" style="margin-right: 1rem;">
          <img src="{{ snippets['SP/LOGO'] | default: '/sp-logo.png' }}" alt="{{ snippets['SP/SITE/NAME'] | default: 'Site Logo' }}" style="height: 36px;">
        </a>
        <h2><a href="/">{{ snippets['SP/APP/TITLE'] | default: 'Dashboard' }}</a></h2>
      </div>
      
      <div class="sp-profile-menu">
        <button class="sp-profile-toggle" tabindex="0">
          <i class="fas fa-user"></i>
          <span>{{ user.fullname }}</span>
          <i class="fas fa-caret-down"></i>
        </button>
        <div class="sp-profile-content">
          {% assign weblink_set = weblinks["Profile Navigation"] %}
          {% for link in weblink_set.weblinks %}
            <a href="{{ link.url | h }}{{ request.query }}" title="{{ link.tooltip | h }}">{{ link.name | h }}</a>
          {% endfor %}
          <a href="/Account/Login/LogOff?returnUrl=/" title="Logout">
            <i class="fas fa-sign-out-alt" style="margin-right: 8px;"></i>Logout
          </a>
        </div>
      </div>
    </div>
  </div>
</header>

{% else %}
{%- comment -%} ANONYMOUS USER - SIDEBAR NAVIGATION {%- endcomment -%}

<style>
/* Anonymous header - transparent overlay on masthead */
.sp-anon-header {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  z-index: 100;
  padding: 20px 0;
}

.sp-anon-header .brand img {
  height: 40px;
  filter: brightness(0) invert(1);
}

.sp-anon-header .sp-lang-link {
  color: rgba(255, 255, 255, 0.9);
  text-decoration: none;
  font-weight: 500;
}

.sp-anon-header .sp-lang-link:hover {
  color: #fff;
  text-decoration: underline;
}
</style>

<nav>
  <ul id="sp-skip-nav" style="margin: 0; padding: 0; list-style: none;">
    <li><a class="visually-hidden-focusable" href="#sp-main">Skip to main content</a></li>
  </ul>
</nav>

<!-- Menu Toggle Button -->
<a class="menu-toggle rounded" href="#"><i class="fas fa-bars"></i></a>

<!-- Sidebar Navigation -->
<nav id="sidebar-wrapper">
  <ul class="sidebar-nav">
    <li class="sidebar-brand">
      <a href="#page-top">{{ snippets['SP/SITE/NAME'] | default: 'Stylish Portfolio' }}</a>
    </li>
    <li class="sidebar-nav-item"><a href="#page-top">Home</a></li>
    {% assign nav_set = weblinks["Primary Navigation"] %}
    {% if nav_set %}
      {% for link in nav_set.weblinks %}
        <li class="sidebar-nav-item">
          <a href="{{ link.url | h }}" title="{{ link.tooltip | h }}">{{ link.name | h }}</a>
        </li>
      {% endfor %}
    {% else %}
      <li class="sidebar-nav-item"><a href="#about">About</a></li>
      <li class="sidebar-nav-item"><a href="#services">Services</a></li>
      <li class="sidebar-nav-item"><a href="#portfolio">Portfolio</a></li>
      <li class="sidebar-nav-item"><a href="#contact">Contact</a></li>
    {% endif %}
    <li class="sidebar-nav-item"><a href="/Account/Login">Sign In</a></li>
  </ul>
</nav>

<!-- Transparent header overlay for logo and language -->
<header class="sp-anon-header">
  <div class="container">
    <div class="d-flex" style="justify-content: space-between; align-items: center;">
      <a href="/" class="brand">
        <img src="{{ snippets['SP/LOGO/LIGHT'] | default: '/sp-logo-white.png' }}" alt="{{ snippets['SP/SITE/NAME'] | default: 'Site Logo' }}">
      </a>
      {% if snippets['SP/ENABLE/LANGUAGE'] == 'true' %}
      <div>
        <a lang="fr" hreflang="fr" href="{{ page.adx_partialurl }}-fr" class="sp-lang-link">
          <span class="d-none d-sm-inline" translate="no">Français</span>
          <abbr title="Français" translate="no" class="d-sm-none">FR</abbr>
        </a>
      </div>
      {% endif %}
    </div>
  </div>
</header>

{% endif %}
