{% comment %}
  Stylish Portfolio Theme - Weblink List Group Left Template
  Based on Start Bootstrap Stylish Portfolio v6.0.6
  Adapted for Power Pages by CloudStrucc
{% endcomment %}

{% assign weblink_set_name = weblink_set_name %}
{% assign showdescriptions = showdescriptions | default: false %}

{% if weblink_set_name %}
  {% assign weblink_set = weblinks[weblink_set_name] %}
  {% if weblink_set %}
    {% if showdescriptions %} 
       
      <nav class="wb-sec" typeof="SiteNavigationElement" id="wb-sec" role="navigation">
        <h2 id="wb-sec-h" class="visually-hidden">Section menu</h2>
        <section class="sp-left-nav-container">
          <h3 class="sp-left-nav-header">{{ snippets['SP/NAV/MENU'] | default: 'Menu' }}</h3>
          <ul class="sp-left-nav list-unstyled">
            {% for link in weblink_set.weblinks %}  
              <li>                                                            
                <a href="{{ link.url | h }}{{ request.query }}" 
                   class="{% if link.url == request.path %}active{% endif %}"
                   title="{{ link.tooltip | h }}">
                  {{ link.name | escape }}
                </a>
                {% if link.weblinks.size > 0 %}
                  <ul class="sp-sub-nav list-unstyled">
                    {% for sublink in link.weblinks %}  
                      <li>                                                            
                        <a href="{{ sublink.url | h }}{{ request.query }}" 
                           class="{% if sublink.url == request.path %}active{% endif %}"
                           title="{{ sublink.tooltip | h }}">
                          {{ sublink.name | escape }}
                        </a>
                      </li>               
                    {% endfor %}
                  </ul>
                {% endif %}
              </li>                        
            {% endfor %}                                         
          </ul>
        </section>
      </nav>
      {% editable weblink_set %}      
       
    {% else %}
    
      <div class="sp-panel {% if weblink_set.editable %}xrm-entity xrm-editable-adx_weblinkset{% endif %}">
        <div class="sp-panel-header">
          <i class="fas fa-bars" aria-hidden="true" style="margin-right: 8px;"></i>
          {{ snippets["Related Links Navigation Heading"] | default: "Related Links" | h }}
        </div>
        <ul class="sp-left-nav list-unstyled">
          {% for link in weblink_set.weblinks %}
            <li>
              <a class="{% if link.url == request.path %}active{% endif %}" 
                 href="{{ link.url | h }}{{ request.query }}" 
                 title="{{ link.tooltip | h }}">
                {% if link.image %}
                  {% if link.image.url startswith '.' %}
                    <span class="{{ link.image.url | split:'.' | join | h }}" aria-hidden="true" style="margin-right: 8px;"></span>
                  {% else %}
                    <img src="{{ link.image.url | h }}" alt="{{ link.image.alternate_text | h }}" style="margin-right: 8px; height: 16px;" />
                  {% endif %}
                {% endif %}
                {{ link.name | h }}
              </a>
            </li>
          {% endfor %}
        </ul>
        {% editable weblink_set %}
      </div>
      
    {% endif %}
  {% endif %}
{% endif %}

<style>
/* Panel styling for non-description mode */
.sp-panel {
  background-color: var(--sp-white);
  border-radius: 0.5rem;
  overflow: hidden;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.sp-panel-header {
  background-color: var(--sp-primary);
  color: var(--sp-white);
  padding: 15px 20px;
  font-weight: 600;
  font-size: 1rem;
}

/* Left Navigation Container */
.sp-left-nav-container {
  background-color: var(--sp-white);
  border-radius: 0.5rem;
  overflow: hidden;
}

.sp-left-nav-header {
  background-color: var(--sp-primary);
  color: var(--sp-white);
  padding: 15px 20px;
  margin: 0;
  font-size: 1.1rem;
  font-weight: 600;
}

/* Navigation List */
.sp-left-nav {
  margin: 0;
  padding: 0;
}

.sp-left-nav > li {
  border-bottom: 1px solid #eee;
}

.sp-left-nav > li:last-child {
  border-bottom: none;
}

.sp-left-nav > li > a {
  display: block;
  padding: 12px 20px;
  color: var(--sp-dark);
  text-decoration: none;
  transition: background-color 0.2s ease, color 0.2s ease, padding-left 0.2s ease;
}

.sp-left-nav > li > a:hover {
  background-color: var(--sp-light);
  color: var(--sp-primary);
  padding-left: 25px;
}

.sp-left-nav > li > a.active {
  background-color: var(--sp-primary);
  color: var(--sp-white);
}

/* Sub Navigation */
.sp-sub-nav {
  background-color: #f8f9fa;
  margin: 0;
  padding: 0;
}

.sp-sub-nav li {
  border-top: 1px solid #eee;
}

.sp-sub-nav a {
  display: block;
  padding: 10px 20px 10px 35px;
  color: var(--sp-gray-dark);
  text-decoration: none;
  font-size: 0.95rem;
  transition: background-color 0.2s ease, color 0.2s ease, padding-left 0.2s ease;
}

.sp-sub-nav a:hover {
  background-color: #e9ecef;
  color: var(--sp-primary);
  padding-left: 40px;
}

.sp-sub-nav a.active {
  background-color: rgba(29, 128, 159, 0.1);
  color: var(--sp-primary);
  font-weight: 600;
}

/* Responsive */
@media (max-width: 991.98px) {
  .sp-left-nav-container {
    margin-bottom: 1.5rem;
  }
}
</style>
