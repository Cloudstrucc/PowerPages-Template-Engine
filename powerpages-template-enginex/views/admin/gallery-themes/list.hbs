<div class="admin-card">
    <div class="admin-card-header">
        <h2>Gallery Themes ({{pagination.total}})</h2>
        <div class="admin-actions">
            <a href="/admin/gallery-themes/add" class="admin-btn admin-btn-primary">Add Theme</a>
        </div>
    </div>
    
    <div class="admin-card-body">
        <!-- Filters -->
        <div style="margin-bottom: 1rem; display: flex; gap: 0.5rem;">
            <a href="/admin/gallery-themes?filter=all" class="admin-btn {{#if (eq filter 'all')}}admin-btn-primary{{else}}admin-btn-secondary{{/if}} admin-btn-sm">All</a>
            <a href="/admin/gallery-themes?filter=published" class="admin-btn {{#if (eq filter 'published')}}admin-btn-primary{{else}}admin-btn-secondary{{/if}} admin-btn-sm">Published</a>
            <a href="/admin/gallery-themes?filter=draft" class="admin-btn {{#if (eq filter 'draft')}}admin-btn-primary{{else}}admin-btn-secondary{{/if}} admin-btn-sm">Drafts</a>
            <a href="/admin/gallery-themes?filter=featured" class="admin-btn {{#if (eq filter 'featured')}}admin-btn-primary{{else}}admin-btn-secondary{{/if}} admin-btn-sm">Featured</a>
        </div>
        
        <table class="admin-table">
            <thead>
                <tr>
                    <th style="width: 80px;">Preview</th>
                    <th>Name</th>
                    <th>Category</th>
                    <th>Bootstrap</th>
                    <th>Status</th>
                    <th>Installs</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {{#each themes}}
                <tr>
                    <td>
                        <img src="{{this.previewImage}}" alt="{{this.name}}" style="width: 60px; height: 40px; object-fit: cover; border-radius: 4px;">
                    </td>
                    <td>
                        <strong>{{this.name}}</strong>
                        {{#if this.isFeatured}}<span class="admin-badge info" style="margin-left: 0.5rem;">Featured</span>{{/if}}
                        <div style="font-size: 0.75rem; color: #64748b;">{{truncate this.description 50}}</div>
                    </td>
                    <td>{{capitalize this.category}}</td>
                    <td>v{{this.bootstrapVersion}}</td>
                    <td>
                        {{#if this.isPublished}}
                        <span class="admin-badge success">Published</span>
                        {{else}}
                        <span class="admin-badge warning">Draft</span>
                        {{/if}}
                    </td>
                    <td>{{this.stats.installCount}}</td>
                    <td>
                        <div class="admin-actions">
                            <a href="/admin/gallery-themes/{{this._id}}/edit" class="admin-btn admin-btn-secondary admin-btn-sm">Edit</a>
                            <form action="/admin/gallery-themes/{{this._id}}/toggle-publish" method="POST" style="display: inline;">
                                <input type="hidden" name="_csrf" value="{{../csrfToken}}">
                                <button type="submit" class="admin-btn admin-btn-secondary admin-btn-sm">
                                    {{#if this.isPublished}}Unpublish{{else}}Publish{{/if}}
                                </button>
                            </form>
                            <form action="/admin/gallery-themes/{{this._id}}/delete" method="POST" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this theme?')">
                                <input type="hidden" name="_csrf" value="{{../csrfToken}}">
                                <button type="submit" class="admin-btn admin-btn-danger admin-btn-sm">Delete</button>
                            </form>
                        </div>
                    </td>
                </tr>
                {{else}}
                <tr>
                    <td colspan="7" style="text-align: center; padding: 2rem;">
                        No themes found. <a href="/admin/gallery-themes/add">Add your first theme</a>
                    </td>
                </tr>
                {{/each}}
            </tbody>
        </table>
        
        {{#if (gt pagination.totalPages 1)}}
        <div class="admin-pagination">
            {{#if (gt pagination.page 1)}}
            <a href="/admin/gallery-themes?page={{subtract pagination.page 1}}&filter={{filter}}">Previous</a>
            {{/if}}
            
            {{#times pagination.totalPages}}
            <a href="/admin/gallery-themes?page={{this}}&filter={{../filter}}" class="{{#if (eq this ../pagination.page)}}active{{/if}}">{{this}}</a>
            {{/times}}
            
            {{#if (lt pagination.page pagination.totalPages)}}
            <a href="/admin/gallery-themes?page={{add pagination.page 1}}&filter={{filter}}">Next</a>
            {{/if}}
        </div>
        {{/if}}
    </div>
</div>
